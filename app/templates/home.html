<!DOCTYPE html>
<html lang="pt">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Galeria dos Meus Animais</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		.card-animal {
			position: relative;
			overflow: hidden;
			cursor: pointer;
			transition: transform 0.3s;
		}

		.card-animal img {
			width: 100%;
			height: auto;
			display: block;
			transition: transform 0.3s;
		}

		.card-animal:hover img {
			transform: scale(1.05);
		}

		.overflow-info {
			position: absolute;
			bottom: 0;
			background: rgba(0, 0, 0, 0.7);
			color: #fff;
			width: 100%;
			padding: 10px;
			opacity: 0;
			transition: opacity 0.3s;
		}

		.card-animal:hover .overflow-info {
			opacity: 1;
		}

		.opcoes-hover {
			position: absolute;
			top: 10px;
			right: 10px;
			display: none;
			flex-direction: column;
			gap: 5px;
			z-index: 1;
		}

		.card-animal:hover .opcoes-hover {
			display: flex;
		}
	</style>
</head>
<body class="container mt-4">
	<h2 class="mb-4">
		{% if perfil_nome %}
			Animais de {{ perfil_nome }}
		{% else %}
			Galeria dos Meus Animais
		{% endif %}
	</h2>
	<a href="/adicionar" class="btn btn-success mb-4">Cadastrar Novo Animal</a>
	<a href="/arquivados" class="btn btn-outline-secondary mb-4 ms-2">Ver Arquivados</a>
	<a href="/login" class="btn btn-outline-secondary mb-4 ms-2" >Login</a>
	<a href="/registrar" class="btn btn-outline-secondary mb-4 ms-2">Registrar</a>
	{% if nomes|length > 1 %}
		<div class="mb-4">
			<a href="/" class="btn btn-secondary btn-sm">Todos</a>
			{% for nome in nomes %}
				<a href="{{ url_for('filtro_por_nome', nome=nome) }}" class="btn btn-primary btn-sm">{{ nome }}</a>
			{% endfor %}
		</div>
	{% endif %}

	<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
		{% for animal in animais %}
		<div class="col">
			<div class="card-animal border rounded shadow-sm">
				
				<!-- Botões visíveis ao passar o mouse -->
				<div class="opcoes-hover">
					{% if session["usuario_id"] == animal[7] %}
						<a href="{{ url_for('arquivar', id=animal[0]) }}" class="btn btn-warning btn-sm">Arquivar</a>
						<a href="{{ url_for('excluir', id=animal[0]) }}" class="btn btn-danger btn-sm" onclick="return confirm('Tem certeza que deseja excluir?');">Excluir</a>
					{% endif %}
				</div>

				<img src="{{ animal[6] }}" alt="Foto do animal {{ animal[1] }}">
				
				<div class="overflow-info">
					<strong>{{ animal[1] }}</strong><br>
					Espécie: {{ animal[2] }}<br>
					Raça: {{ animal[3] }}<br>
					{{ animal[5] }}
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
</body>
</html>
