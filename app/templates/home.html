<!DOCTYPE html>
<html lang="pt">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Galeria dos Meus Animais</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		/* Estilo para o cont√™iner do card do animal */
		.card-animal {
			position: relative; /* Necess√°rio para posicionar elementos filhos de forma absoluta */
			overflow: hidden;
			cursor: pointer;
			transition: transform 0.3s;
		}

		.card-animal img {
			width: 100%;
			height: auto;
			display: block;
			transition: transform 0.3s;
		}

		/* Efeito de zoom na imagem ao passar o mouse */
		.card-animal:hover img {
			transform: scale(1.05);
		}

		/* Informa√ß√µes que aparecem na parte inferior ao passar o mouse */
		.overflow-info {
			position: absolute;
			bottom: 0;
			background: rgba(0, 0, 0, 0.7);
			color: #fff;
			width: 100%;
			padding: 10px;
			opacity: 0;
			transition: opacity 0.3s;
		}

		.card-animal:hover .overflow-info {
			opacity: 1;
		}

		/* Cont√™iner para os bot√µes de a√ß√£o (Arquivar/Excluir) */
		.opcoes-hover {
			position: absolute;
			top: 10px;
			right: 10px;
			display: none; /* Escondido por padr√£o */
			flex-direction: column;
			gap: 5px;
			z-index: 10; /* Garante que fique sobre a imagem */
		}

		/* Mostra os bot√µes quando o mouse est√° sobre o card */
		.card-animal:hover .opcoes-hover {
			display: flex;
		}
	</style>
</head>
<body class="container mt-4">
	<h2 class="mb-4">
		{% if perfil_nome %}
			Animais de {{ perfil_nome }}
		{% else %}
			Galeria dos Meus Animais
		{% endif %}
	</h2>
	{% if 'usuario_id' in session %}
		<a href="{{ url_for('explorar') }}" class="btn btn-outline-primary mb-4">üåç Explorar</a>
¬† ¬† 	<a href="/logout" class="btn btn-outline-secondary mb-4 ms-2">logout</a>
		<a href="/adicionar" class="btn btn-outline-secondary mb-4 ms-2">Cadastrar Novo Animal</a>
		<a href="/arquivados" class="btn btn-outline-secondary mb-4 ms-2">Ver Arquivados</a>
	{% else %}
		<a href="/login" class="btn btn-outline-secondary mb-4 ms-2" >Login</a>
		<a href="/registrar" class="btn btn-outline-secondary mb-4 ms-2">Registrar</a>
	{% endif %}
	{% if nomes|length > 1 %}
		<div class="mb-4">
			<a href="/" class="btn btn-secondary btn-sm">Todos</a>
			{% for nome in nomes %}
				<a href="{{ url_for('filtro_por_nome', nome=nome) }}" class="btn btn-primary btn-sm">{{ nome }}</a>
			{% endfor %}
		</div>
	{% endif %}

	<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
		{% for animal in animais %}
		<div class="col">
			<div class="card-animal border rounded shadow-sm">
				
				<!-- Bot√µes vis√≠veis ao passar o mouse -->
				{% if 'usuario_id' in session %}
					<div class="opcoes-hover">
						<!-- NOTA DE DIAGN√ìSTICO: A condi√ß√£o 'if' foi removida temporariamente. -->
						<!-- Se os bot√µes aparecerem agora, o problema est√° na sua l√≥gica de sess√£o/dados. -->
						<!-- Verifique se 'session["usuario_id"]' e 'animal[7]' cont√™m os valores esperados. -->
						<a href="{{ url_for('arquivar', id=animal[0]) }}" class="btn btn-warning btn-sm">Arquivar</a>
						<a href="{{ url_for('excluir', id=animal[0]) }}" class="btn btn-danger btn-sm" onclick="return confirm('Tem certeza que deseja excluir?');">Excluir</a>
					</div>
				{% endif %}

				<img src="{{ animal[6] }}" alt="Foto do animal {{ animal[1] }}">
				
				<div class="overflow-info">
					<strong>{{ animal[1] }}</strong><br>
					Esp√©cie: {{ animal[2] }}<br>
					Ra√ßa: {{ animal[3] }}<br>
					{{ animal[5] }}
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
</body>
</html>
